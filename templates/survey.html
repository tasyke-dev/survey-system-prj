<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet'>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  integrity="sha384-pzjw6f+ua9b65PvO4BLDiuM2ZRqJ3sBBkBBtkC2vNoPe6SMJFw2Ip4gg9RM4hF1e"
  crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <link rel="stylesheet" href="static/styling.css" />
  <link rel="stylesheet" href="static/lib/leaflet/leaflet.css" />
  <style>
    body {
    height: 100%;
    width: 100%;
    font-family: 'Rubik';
    font-size: 16px;
    }
    .map-container {
      height: 400px;
      border: 1px solid black; 

    }
    #map_div {
        height: 100%; 
    }
    #last-img {
      width: 200px;
      height: 200px;
    }

  </style>
  <!-- Include necessary JavaScript files -->

  
  <title>Право на город</title>
</head>
<body>
    <div class="nav-wrapper">
        <a  href="#" style="padding-right: 20px">
            <img src="static/images/icons/Право На Город!.png">
        </a>
        <div class="nav-bar">
            <a class="disable-link" href="{{ url_for('show_map')}}">Карта опросов</a>
        </div>


    </div>
    <div class="container ">
        <div class="row">
          <div class="col-12" style="padding-right:0 !important; padding-left:0 !important">
            <ul class="nav nav-tabs justify-content-center">
              <li class="nav-item flex-fill">
                <a class="nav-link active" href="#tab1" >Местоположение</a>
              </li>
              <li class="nav-item flex-fill">
                <a class="nav-link" href="#tab2" data-toggle="tab">Категория</a>
              </li>
              <li class="nav-item flex-fill">
                <a class="nav-link" href="#tab3" data-toggle="tab">Отношение</a>
              </li>
              <li class="nav-item flex-fill">
                <a class="nav-link" href="#tab4" data-toggle="tab">Вложение</a>
              </li>
              <li class="nav-item flex-fill">
                <a class="nav-link" href="#tab5" data-toggle="tab">Комментарий</a>
              </li>
            </ul>
            
            <div class="tab-content">
                <div class="tab-pane fade show active" id="tab1">
                    <div class="bottom-line" >
                        <h3 class="hcenter">Выберите местоположение</h3>
                    </div>
                    <div  style="padding-top: 5%">
                    <div class="map-container" >
                        <div id="map_div" ></div>
                    </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <button onclick="goToPreviousTab()" class="category_button" disabled><i class="fas fa-arrow-left" style="margin-right: 15px"></i>НАЗАД</button>
                        <button onclick="goToNextTab()" class="category_button">ВПЕРЕД<i class="fas fa-arrow-right" style="margin-left: 15px"></i></button>
                      </div>
                  </div>
              <div class="tab-pane fade " id="tab2">
                <div class="bottom-line">
                  <h3 class="hcenter" id="category_name">Выберите категорию</h3>
                </div>
                <div class="row" id="categ" style="padding-top: 5%">
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-1')">
                      <img src="static/images/category/1.png">
                      <div>Здание | Дом </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-2')">
                      <img src="static/images/category/2.png">
                      <div> Улица </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-3')">
                      <img src="static/images/category/3.png">
                      <div> Двор | Парк </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-4')">
                      <img src="static/images/category/4.png">
                      <div> Комуникации </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-5')">
                      <img src="static/images/category/5.png">
                      <div> Животные </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-6')">
                      <img src="static/images/category/6.png">
                      <div> Природа | Растения </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-7')">
                      <img src="static/images/category/7.png">
                      <div> Заведения </div>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="category" onclick="hideAndShowDiv('categ', 'categ-8')" >
                      <img src="static/images/category/8.png">
                      <div> Непорядок </div>
                    </div>
                  </div>
              </div>


              <div class="row" id="categ-1" style="padding-top: 5%; justify-content: center; display: none">
                <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-1', 'categ')" style="background: white;">Назад</button></div>
                <div class="col-3">
                  <div class="category" onclick="hideAndShowDiv('categ-1', 'categ-1-1')">
                    <img src="static/images/category/1-1.png">
                    <div>Cнаружи </div>
                  </div>
                </div>
                <div class="col-3">
                  <div class="category" onclick="hideAndShowDiv('categ-1', 'categ-1-2')">
                    <img src="static/images/category/1-1-1.png">
                    <div> Внутри </div>
                  </div>
                </div>
            </div>

            <div class="row" id="categ-1-1" style="padding-top: 5%; justify-content: center; display: none">
              <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-1-1', 'categ-1')" style="background: white;">Назад</button></div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-1.png">
                  <div>Вход | дверь</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-2.png">
                  <div>Крыша | сосульки</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-3.png">
                  <div>Стены</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-4.png">
                  <div>Лестница</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-5.png">
                  <div>Окна</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-6.png">
                  <div>Кондиционеры</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-7.png">
                  <div>Балкон</div>
                </div>
              </div>
              <div class="col-3">
                <div class="category" onclick="showCategoryName(this)">
                  <img src="static/images/category/1-1-8.png">
                  <div>Водосток</div>
                </div>
              </div>
          </div>



          <div class="row" id="categ-1-2" style="padding-top: 5%; justify-content: center; display: none">
            <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-1-2', 'categ-1')" style="background: white;">Назад</button></div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/1-2-1.png">
                <div>Подъезд</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/1-2-2.png">
                <div>Лифт</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/1-2-3.png">
                <div>Стены | потолок</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/1-2-4.png">
                <div>Пол | лестница</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/1-2-5.png">
                <div>Дверь | окно</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/1-2-6.png">
                <div>Мебель</div>
              </div>
            </div>
          </div>


          <div class="row" id="categ-2" style="padding-top: 5%; justify-content: center; display: none">
            <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-2', 'categ')" style="background: white;">Назад</button></div>
            <div class="col-3">
              <div class="category" onclick="hideAndShowDiv('categ-2', 'categ-2-1')">
                <img src="static/images/category/2-1.png">
                <div>Транспорт</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="hideAndShowDiv('categ-2', 'categ-2-2')">
                <img src="static/images/category/2-2.png">
                <div>Проезжая часть</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="hideAndShowDiv('categ-2', 'categ-2-3')">
                <img src="static/images/category/2-3.png">
                <div>Тротуар</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="hideAndShowDiv('categ-2', 'categ-2-4')">
                <img src="static/images/category/2-4.png">
                <div>Переход</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/2-5.png">
                <div>Забор</div>
              </div>
            </div>
            <div class="col-3">
              <div class="category" onclick="showCategoryName(this)">
                <img src="static/images/category/2-6.png">
                <div>Рекламная конструкция</div>
              </div>
            </div>
        </div>


        <div class="row" id="categ-2-1" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-2-1', 'categ-2')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-1-1.png">
              <div>Автобус</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-1-2.png">
              <div>Легковое авто</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-1-3.png">
              <div>Самокат</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-1-4.png">
              <div>Велосипед</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-1-5.png">
              <div>Мотоцикл</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-1-6.png">
              <div>Грузовое авто</div>
            </div>
          </div>
        </div>


        <div class="row" id="categ-2-2" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-2-2', 'categ-2')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-1.png">
              <div>Автодорога</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-2.png">
              <div>Парковка</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-3.png">
              <div>Рельсы</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-4.png">
              <div>Велодорожка</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-5.png">
              <div>Люк | ливневый сток</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-6.png">
              <div>Знак</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-7.png">
              <div>Светофор</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-2-8.png">
              <div>Столб | фонарь</div>
            </div>
          </div>
        </div>



        <div class="row" id="categ-2-3" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-2-3', 'categ-2')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-3-1.png">
              <div>Покрытие </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-3-2.png">
              <div>Люк</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-3-3.png">
              <div>Лестницы</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-3-4.png">
              <div>Фонарь</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-3-5.png">
              <div>Пандус</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-3-6.png">
              <div>Тумбы | кашпо</div>
            </div>
          </div>
        </div>

        <div class="row" id="categ-2-4" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-2-4', 'categ-2')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-4-1.png">
              <div>Надземный</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-4-2.png">
              <div>Подземный</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-4-3.png">
              <div>Зебра</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/2-4-4.png">
              <div>Светофоры</div>
            </div>
          </div>
        </div>


        <div class="row" id="categ-3" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-3', 'categ')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-1.png">
              <div>Фонтан</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-2.png">
              <div>Уличная мебель</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-3.png">
              <div>Детская площадка</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-4.png">
              <div>Спортивная площадка</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-5.png">
              <div>Мусорный бак</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-6.png">
              <div>Памятник</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-7.png">
              <div>Столб</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/3-8.png">
              <div>Тех. сооружение</div>
            </div>
          </div>
        </div>

        <div class="row" id="categ-4" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-4', 'categ')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-1.png">
              <div>Вода</div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-2.png">
              <div> Электричество </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-3.png">
              <div> Свет </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-4.png">
              <div> Газ </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-5.png">
              <div> Связь </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-6.png">
              <div> Трубы  </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-7.png">
              <div> Провода  </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/4-8.png">
              <div>Ком. столб</div>
            </div>
          </div>
        </div>

        <div class="row" id="categ-5" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-5', 'categ')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/5-1.png">
              <div>Собака   </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/5-2.png">
              <div> Кошка </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/5-3.png">
              <div> Птица </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/5-4.png">
              <div> Дикий зверь </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/5-5.png">
              <div> Крысы | змеи </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/5-6.png">
              <div> Насекомые  </div>
            </div>
          </div>
        </div>


        <div class="row" id="categ-6" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-6', 'categ')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-1.png">
              <div>Дерево   </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-2.png">
              <div> Куст </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-3.png">
              <div> Трава | поле </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-4.png">
              <div> Цветы | клумба </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-5.png">
              <div> Водоем </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-6.png">
              <div> Овраг   </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-7.png">
              <div> Воздух  </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/6-8.png">
              <div> Пляж</div>
            </div>
          </div>
        </div>


        <div class="row" id="categ-7" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-7', 'categ')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-1.png">
              <div>Магазин | рынок    </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-2.png">
              <div> Бар | клуб </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-3.png">
              <div> Столовая | общепит </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-4.png">
              <div> МФЦ </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-5.png">
              <div> Музей / Театр </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-6.png">
              <div> Автоуслуги   </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-7.png">
              <div> Бытовые услуги  </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/7-8.png">
              <div> ТЦ</div>
            </div>
          </div>
        </div>



        <div class="row" id="categ-8" style="padding-top: 5%; justify-content: center; display: none">
          <div style="text-align: center;"><button  onclick="hideAndShowDiv('categ-8', 'categ')" style="background: white;">Назад</button></div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-1.png">
              <div>Куча мусора    </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-2.png">
              <div> Снег | лед </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-3.png">
              <div> Стройматериалы </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-4.png">
              <div> Сосульки </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-5.png">
              <div> Граффити </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-6.png">
              <div> Лужа  </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-7.png">
              <div> Стройплощадка  </div>
            </div>
          </div>
          <div class="col-3">
            <div class="category" onclick="showCategoryName(this)">
              <img src="static/images/category/8-8.png">
              <div> Яма </div>
            </div>
          </div>
        </div>





                <div class="d-flex justify-content-between">
                  <button onclick="goToPreviousTab()"class="category_button"><i class="fas fa-arrow-left" style="margin-right: 15px"></i>НАЗАД</button>
                  <button onclick="goToNextTab()" class="category_button">ВПЕРЕД<i class="fas fa-arrow-right" style="margin-left: 15px"></i></button>
                </div>
              </div>




              <div class="tab-pane fade" id="tab3">
                <div class="bottom-line">
                    <h3 class="hcenter" id="slider_value">Укажите своё отношение</h3>
                </div>
                    <section class="emoji-container">
                    <output class="emoji" id="emojiValue">&#x1F610;</output>
                    
                    </section>
                      <p class="emoji-text">0</p>  
                    <section class="range-container">  
                    <input oninput="range.value" id="range" class="range-slider" type="range" value="5" min="0" max="10">
                        
                    </section>
                <div class="d-flex justify-content-between">
                    <button onclick="goToPreviousTab()" class="category_button"><i class="fas fa-arrow-left" style="margin-right: 15px"></i>НАЗАД</button>
                    <button onclick="goToNextTab()" class="category_button">ВПЕРЕД<i class="fas fa-arrow-right" style="margin-left: 15px"></i></button>
                  </div>

              </div>
              <div class="tab-pane fade" id="tab4">
                <div class="bottom-line">
                    <h3 class="hcenter">Прикрепите фотографии</h3>
                </div>
                <div class="img-input">
                  <img id="last-img" src="static/images/icons/images .png">
                </div>
                
                <div class="photo-input">
                  
                  <input id="file-input" type="file" accept="image/*, video/*" multiple onchange="handleFiles(this.files)">
                </div>
                
                <div class="d-flex justify-content-between">
                    <button onclick="goToPreviousTab()" class="category_button"><i class="fas fa-arrow-left" style="margin-right: 15px"></i>НАЗАД</button>
                    <button onclick="goToNextTab()" class="category_button">ВПЕРЕД<i class="fas fa-arrow-right" style="margin-left: 15px"></i></button>
                </div>
              </div>
              <div class="tab-pane fade" id="tab5">
                <div class="bottom-line">
                    <h3 class="hcenter">Оставьте комментарий</h3>
                </div>

                <textarea id="comment" placeholder="Добавьте ваш комментарий..." style="margin-top: 5%; width: 100%; height: 25vh; box-sizing: border-box;"></textarea>

                <textarea id="tags" placeholder="Напишите хэш-тэги через запятую..." style="margin-top: 2%; width: 100%; height: 10vh; box-sizing: border-box;"></textarea>
                <div id="alert" style="text-align: center; font-weight: bold;color: red;"></div>
                <div class="d-flex justify-content-between">
                    <button onclick="goToPreviousTab()" class="category_button"><i class="fas fa-arrow-left" style="margin-right: 15px"></i>НАЗАД</button>
                    <button onclick="sendData()" class="category_button">ОТПРАВИТЬ</button>
                    <button onclick="goToNextTab()" class="category_button" disabled !important>ВПЕРЕД<i class="fas fa-arrow-right" style="margin-left: 15px"></i></button>
                  </div>
              </div>

              
            </div>
          </div>
        </div>
      </div>
    </body>

    </html>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  
    <script src="static/lib/leaflet/leaflet.js"></script>
  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
        $('.nav-link').click(function(e) {
        e.preventDefault();
        $('.nav-link').removeClass('active');
        $(this).addClass('active');
        $('.tab-pane').removeClass('show active');
        $($(this).attr('href')).addClass('show active');
        });
    });

    function goToPreviousTab() {
    var activeTab = $(".tab-pane.active");
    var previousTab = activeTab.prev(".tab-pane");
    if (previousTab.length > 0) {
      activeTab.removeClass("show active");
      previousTab.addClass("show active");
      updateNavigationButtons(previousTab);
    }
  }

  function goToNextTab() {
    var activeTab = $(".tab-pane.active");
    var nextTab = activeTab.next(".tab-pane");
    if (nextTab.length > 0) {
      activeTab.removeClass("show active");
      nextTab.addClass("show active");
      updateNavigationButtons(nextTab);
    }
  }

  function updateNavigationButtons(activeTab) {
    var backButton = $(".category_button:first");
    var nextButton = $(".category_button:last");

    if (activeTab.is(":first-child")) {
      backButton.attr("disabled", true);
    } else {
      backButton.attr("disabled", false);
    }

    if (activeTab.is(":last-child")) {
      nextButton.attr("disabled", true);
    } else {
      nextButton.attr("disabled", false);
    }
  }


    function showCategoryName(element) {
    var categoryName = element.querySelector("div").innerText;
    var headingElement = document.getElementById("category_name");
    headingElement.innerText = categoryName;
  }
  function hideAndShowDiv(hideId, showId) {
    var hideDiv = document.getElementById(hideId);
    var showDiv = document.getElementById(showId);

    if (hideDiv && showDiv) {
      hideDiv.style.display = "none";
      showDiv.style.display = "flex";
    }
  }


    var map = L.map('map_div').setView([51.505, -0.09], 13); // Set the initial coordinates and zoom level

    // Add a tile layer to the map (e.g., OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18,
    }).addTo(map);
    //map.flyTo([48.7071, 44.5170], 13);

    navigator.geolocation.getCurrentPosition(function(position) {
      var latlng = L.latLng(position.coords.latitude, position.coords.longitude);
      
      map.flyTo(latlng, 13);
    }, function(error) {
      alert("Не удалось определить ваше местоположение");
    });

    var marker; // Переменная для хранения маркера
    var x, y;

    // Обработка клика на карту
    function onMapClick(e) {
      // Если уже существует маркер, удаляем его
      if (marker) {
        map.removeLayer(marker);
      }

      // Создание нового маркера с координатами клика
      marker = L.marker(e.latlng).addTo(map);
      x = e.latlng.lat;
      y = e.latlng.lng;
    }

    // Привязка события клика к функции onMapClick
    map.on('click', onMapClick);

    var range = document.getElementById("range");
    range.addEventListener(
    "input",
    function() {
        var elem = document.querySelector(".emoji");
        var text = document.querySelector(".emoji-text");

        if (range.value >= 0 && range.value < 1) {
        elem.innerHTML = "&#X1F621;";
        text.innerHTML = "-5";
        } else if (range.value >= 1 && range.value < 2) {
        elem.innerHTML = "&#X1F620;";
        text.innerHTML = "-4";
        } else if (range.value >= 2 && range.value < 3) {
        elem.innerHTML = "&#X1F641;";
        text.innerHTML = "-3";
        } else if (range.value >= 3 && range.value < 4) {
        elem.innerHTML = "&#X1F612;";
        text.innerHTML = "-2";
        } else if (range.value >= 4 && range.value < 5) {
        elem.innerHTML = "&#X1F611;";
        text.innerHTML = "-1";
        } else if (range.value >= 5 && range.value < 6) {
        elem.innerHTML = "&#X1F610;";
        text.innerHTML = "0";
        } else if (range.value >= 6 && range.value < 7) {
        elem.innerHTML = "&#X1F642;";
        text.innerHTML = "1";
        } else if (range.value >= 7 && range.value < 8) {
        elem.innerHTML = "&#X1F60A;";
        text.innerHTML = "2";
        } else if (range.value >= 8 && range.value < 9) {
        elem.innerHTML = "&#X1F600;";
        text.innerHTML = "3";
        } else if (range.value >= 9 && range.value < 10) {
        elem.innerHTML = "&#X1F601;";
        text.innerHTML = "4";
        } else if (range.value >= 10 && range.value <= 10) {
        elem.innerHTML = "&#X1F929;";
        text.innerHTML = "5";
        }
    },
    false
    );
    function handleFiles(files) {
  if (files.length > 10) {
    alert("Максимальное количество файлов - 10.");
    return;
  }

  for (var i = 0; i < files.length; i++) {
    var file = files[i];
    var reader = new FileReader();

    reader.onload = (function(file) {
      return function(e) {
        var imgElementId = "img-" + getUniqueNumber();
        var imgElement = document.createElement("img");
        imgElement.id = imgElementId;
        imgElement.src = e.target.result;

        // Append the image element to the desired container
        document.getElementById("image-container").appendChild(imgElement);
      };
    })(file);

    reader.readAsDataURL(file);
  }
}

var uniqueNumber = 1;

function getUniqueNumber() {
  return uniqueNumber++;
}


  function sendData() {
  var comment = document.getElementById("comment").value;
  var tags = document.getElementById("tags").value;
  var alertDiv = document.getElementById("alert");
  var files = document.getElementById("file-input").files;
  var category = document.getElementById("category_name").innerText;

  if ( x === undefined || y === undefined || files.length === 0 || category === "Выберите категорию") {
    alertDiv.innerText = 'Убедитесь, что вы выбрали геолокацию, категорию и прикрепили файл!';
  }
  else {
    alertDiv.innerText = '';
    var data = new FormData();
    data.append("categoryName", category);
    data.append("x", x);
    data.append("y", y);
    data.append("rangeValue", range.value);
    data.append("comment", comment);
    data.append("tags", tags);

    
    for (var i = 0; i < files.length; i++) {
      data.append("file" + i, files[i]);
    }

    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/submit", true);

    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
        // Обработка успешного ответа от сервера
        console.log("Данные успешно отправлены!");
      }
    };

    xhr.send(data);
  }

}
    </script>
